# Приложение для анализа банковских операций.

Проект создан в учебных целях. В разработке.

## Содержание

## Технологии
[Python] (https://www.python.org/)  

![Poetry](https://img.shields.io/badge/Poetry-%233B82F6.svg?style=for-the-badge&logo=poetry&logoColor=0B3D8D)

## Использование
Открыть проект в PyCharm.  

**utils.py** содержит функции:

`read_info`  
Функция для считывания финансовых операций из Excel,  
принимает путь к файлу Excel в качестве аргумента.  

`read_user_settings`  
Функция, которая принимает JSON-файл с настройками пользователя  
и возвращает список с нужными для вывода данными  

`input_date_daytime`  
Функция возвращает дату в формате daytime  

`output_date`  
Функция, которая принимает начальную дату и диапазон и выдает конечную дату  
в этом диапазоне (W - неделя, M - месяц, Y = год, All = все даты)    

`sorted_date`    
Функция, которая принимает данные, конечную дату и диапазон и выдает все операции  
в этом диапазоне (W - неделя, M - месяц, Y = год, All = все опрерации)  

`cards_info`  
Функция, которая принимает отсортированные данные и выдает информацию по картам:  
        последние 4 цифры карты;  
        общая сумма расходов;  
        кешбэк (1 рубль на каждые 100 рублей).  
Возвращает список.

`top_transactions`  
Функция, которая принимает данные и выдает информацию - топ-5 транзакций по сумме платежа.  

`currency_rates`  
Функция получения курса валют.

`stocks_prices`  
Функция получения стоимости акций.  

`total_expenses`  
Функция, подсчитывающая общую сумму расходов.  

`expenses_by_category`  
Функция, формирующая раздел «Основные», в котором траты по категориям  
отсортированы по убыванию. Данные предоставляются по 7 категориям с  
наибольшими тратами, траты по остальным категориям суммируются и попадают  
в категорию «Остальное».  

`total_income`  
Функция, подсчитывающая общую сумму поступлений.  

`income_by_category`  
Функция, формирующая раздел «Основные», в котором поступления по   
категориям отсортированы по убыванию.  

**views.py** содержит функции:  
  
`greeting`    
Функция, формирующая приветствие в зависимости от текущего времени.      

`json_answer_main`  
Функция, формирующая JSON ответ для страницы "Главная":  
Приветствие в формате "???", где ??? — «Доброе утро» / «Добрый день» /  
«Добрый вечер» / «Доброй ночи» в зависимости от текущего времени.  
        По каждой карте:  
            последние 4 цифры карты;  
            общая сумма расходов;  
            кешбэк (1 рубль на каждые 100 рублей).  
Топ-5 транзакций по сумме платежа.  
Курс валют.  
Стоимость акций из S&P500.  

`json_answer_events`  
Функция, формирующая JSON ответ для страницы "События":  
    «Расходы»:  
        Общая сумма расходов.  
        Раздел «Основные», в котором траты по категориям отсортированы по убыванию. Данные  
        предоставляются по 7 категориям с наибольшими тратами, траты по остальным категориям    
        суммируются и попадают в категорию «Остальное».    
    «Поступления»:  
        Общая сумма поступлений.  
        Раздел «Основные», в котором поступления по категориям отсортированы по убыванию.  
        Курс валют.  
        Стоимость акций из S&P500.  

`json_answer_cashback`  
Функция, формирующая JSON ответ для страницы "Сервисы":  
JSON с анализом, сколько на каждой категории можно заработать кешбэка.  
    Формат выходных данных:  
                {  
                    "Категория 1": 1000,  
                    "Категория 2": 2000,  
                    "Категория 3": 500  
                }  

**services.py** содержит функции:  
  
`cashback`   
Функция, подсчитывающая, сколько на каждой категории можно заработать кешбэка.  

`search_word`  
Функция поиска слова в описании или категории.  

`search_number`
Функция поиска транзакций, в описании содержащий мобильные номера

`search_name`    
Функция поиска транзакций, в описании содержащий имена для перевода  

**reports.py** содержит функции:  
  
`writing_report_to_file`  
Декоратор, который записывает данные отчета в файл data/report.xlsx  

`writing_report_to_file_by_user`    
Декоратор, который записывает данные отчета в файл указанный в параметре  

`spending_by_category`  
Функция, которая возвращает траты по заданной категории за последние три месяца.  

## Информация о тестировании:

Для тестирования использовался фрейморк `pytest`.
Запуск тестов в терминале: команда `pytest`.
Приложение протестировано. Тесты пройдены успешно.
Отчет о выполнении тестов в формате HTML находится в папке [htmlcov/index.html](htmlcov/index.html).

Папка `tests` содержит файлы для тестирования модулей:  
test_reports.py  
test_services.py  
test_utils.py  
test_views.py  

### Требования
Для установки и запуска проекта, необходимы:
[Python](https://www.python.org/)
[PyCharm](https://www.jetbrains.com/pycharm/)

## Команда проекта
[Roman Z](roman-z@inbox.ru)